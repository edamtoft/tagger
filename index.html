<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Tagger by edamtoft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Tagger</h1>
      <h2 class="project-tagline">Framework for declaring and automatically resolving custom web components based on their tags</h2>
      <a href="https://github.com/edamtoft/tagger" class="btn">View on GitHub</a>
      <a href="https://github.com/edamtoft/tagger/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/edamtoft/tagger/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="tagger" class="anchor" href="#tagger" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tagger</h1>

<p>Tagger is a front-end javascript runtime based around the 
idea that you should be able to extend and modularize HTML with web components
without having to worry about when and where to load
what, and with the development overhead to build components. Tagger leverages
the power of require.js to automatically handle dependency resolution throught
your project, so all you have to do is create your components. Tagger does 
not aim to be a all-encompassing framework. Though it provides a range of system 
libraries to make many common frontend tasks easier, it makes few
assumptions about how to use it or what it can work with. Feel free to mix
this in with your favorite other libraries and tools.</p>

<h2>
<a id="what-it-does" class="anchor" href="#what-it-does" aria-hidden="true"><span class="octicon octicon-link"></span></a>What it does</h2>

<p>Tagger automatically resolves everything you need based on what's on the 
current page. No matter how many components you have on the page, you
only need to include tagger.js in a script tag.</p>

<p>Let's say you want to create a custom component says hello to someone based on
a property.</p>

<p>Start off by naming your custom component. Per W3 specifications,
custom tags must be two or more words separated by dashes. Let's call this one
sample-component</p>

<p>In your markup, create the following:</p>

<pre><code>&lt;sample-component name="World"&gt;&lt;/sample-component&gt;
</code></pre>

<p>In the controllers folder of the runtime, create a file called sampleComponentController.js:</p>

<pre><code>define([
    "system/text"
], function(text) {

    "use strict";

    function SampleComponentController(element, config) {
        element.innerHTML = text.from("&lt;h1&gt;Hello {name}&lt;/h1&gt;");
    }

    return SampleComponentController;
});
</code></pre>

<p>text.from is a system runtime helper that interpolates objects into strings. More on these libraries
later.</p>

<p>Open a terminal in the project root and run "grunt" to compile the project (you'll need 
node.js and grunt. See Installation), open the HTML page, and you component should 
automatically boot up. You should see the following:</p>

<pre><code>&lt;sample-component name="World"&gt;
    &lt;h1&gt;Hello World&lt;/h1&gt;
&lt;/sample-component&gt;
</code></pre>

<h4>Live Demo</h4>
<sample-component name="World"></sample-component>

<p>For a more practical (though more complex) example, see the google map component in the
controllers folder.</p>

<h4>Live Demo</h4>
<google-map address="1600 Pennsylvania Ave NW, Washington, DC 20500" key="AIzaSyBn_UEIKjYsaa0nBSDBh2lOSAJ-W_pC1e8" zoom="12" info="<h4>Marker Title</h4><p>Marker description.</p>"></google-map>


<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>To start, fork this repo and clone it. You will need to install node.js and grunt.</p>

<p>to install node, goto <a href="https://nodejs.org/en/">https://nodejs.org/en/</a> and download and run the installer for your platform.</p>

<p>next, open a terminal window and run the following to install grunt (the task runner/compiler for our modules):</p>

<pre><code>npm install grunt-cli -g
</code></pre>

<p>next, navigate in the terminal to the root of this project and run:</p>

<pre><code>npm install --dev
</code></pre>

<p>to install the build dependencies.</p>

<p>make your controllers in the source folder, and run "grunt" from the terminal to compile. By default, it runs jshint to
detect javascript errors.</p>

<p>If you use Visual Studio Code, it is already set to build automatically with ctrl+shift+b.</p>

<h3>
<a id="dont-want-to-install-anything" class="anchor" href="#dont-want-to-install-anything" aria-hidden="true"><span class="octicon octicon-link"></span></a>Don't want to install anything?</h3>

<p>That's fine too. You just won't get automatic compression / optimization checks of new modules/controllers.</p>

<p>Download just the "bin" folder (the whole folder, not just tagger.js), and start writing controllers in the controllers folder. Feel free to delete the samples.</p>

<h2>
<a id="build-in-mvc-functionality" class="anchor" href="#build-in-mvc-functionality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build in MVC Functionality</h2>

<p>This is still under construction, but here's how it works:</p>

<p>Markup:</p>

<pre><code>&lt;sample-mvc-component&gt;
    &lt;h4 model="test"&gt;&lt;/h4&gt;
    &lt;input type="text" model="test" /&gt;
    &lt;button event="clickHappened"&gt;Alert Me&lt;/button&gt;
&lt;/sample-mvc-component&gt;
</code></pre>

<p>Controller:</p>

<pre><code>define([], function() {

    function SampleMvcController(element, config) {

        this.clickHappened = function() {
            alert(this.model.test);
        };
    }

    return SamplMvcController;
});
</code></pre>

<p>The H4 tag and the input will be automatically bound in real time. When you click the button, 
it will call the clickHappened function on the controller, no additional wire-up needed.</p>

<p>If you include a this.modelChanged function in the controller, it will be called when any part of the
model is changed.</p>

<p>This aspect is still experimental and will remain rudamentary for a while. If you need additional
functionality, combining this with another MVC library. </p>

<h2>
<a id="config-options" class="anchor" href="#config-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Config Options</h2>

<p>If you need to pass in more config options than will easily fit as attributes, you can add a script tag
of type="application/JSON" with role="config" inside the component with config as JSON.</p>

<p>multi-word config keys are collapsed to camelCase when resolving keys from the component attributes.</p>

<pre><code>&lt;google-map&gt;
    &lt;script type="application/JSON" role="config"&gt;
    {
        "address":"some long address",
        "key":"loiasdf9yh3r893yh5r43982492834",
        "info":"&lt;h4&gt;Info Window Title&lt;/h4&gt;&lt;p&gt;Marker Description&lt;/p&gt;"    
    }
    &lt;/script&gt;
&lt;/google-map&gt;

</code></pre>

<h2>
<a id="system-libraries" class="anchor" href="#system-libraries" aria-hidden="true"><span class="octicon octicon-link"></span></a>System Libraries</h2>

<p>Tagger comes pre-installed with a number of system libraries which provide an easy-to-use and
reusable wrappers around many common operations. These can be accessed through require-js's 
syntax.</p>

<p>When defining dependencies for a controller (or other module):</p>

<pre><code>define([
    "system/text", 
    "system/http"
], function(text, http) {

    // text and http are available here.

});

</code></pre>

<p>Or on it's own:</p>

<pre><code>require([
    "system/text", 
    "system/http"
], function(text, http) {

    // text and http are available here.
});
</code></pre>

<h3>
<a id="text" class="anchor" href="#text" aria-hidden="true"><span class="octicon octicon-link"></span></a>Text</h3>

<p>Interpolates and manipulates text similarly to string.Format in c#</p>

<pre><code>    var yourName = "you";
    var myName = "me";

    text.from("hello {0}, my name is {1}", yourName, myName);   
</code></pre>

<p>you can also enter it by property name in an object</p>

<pre><code>    var props = {
        yourName: "you",
        myName: "me"    
    };

    text.from("hello {yourName}, my name is {myName}", props);
</code></pre>

<p>you can also parse a querystring to an object or serialize one from an object:</p>

<pre><code>    var query = {
        page: 1,
        type: "sample type"     
    };

    var serialized = text.toQuery(query); //page=1&amp;type=sample%20type

    var deserialized = text.fromQuery(serialized);

    desirialized.type // returns "sample type";
</code></pre>

<h3>
<a id="http" class="anchor" href="#http" aria-hidden="true"><span class="octicon octicon-link"></span></a>http</h3>

<p>Http aims to make it easier to handle making calls to REST api endpoints. See the following example:</p>

<pre><code>    var params = {
        topic: "sometopic",
        subtopic: "somesubtopic"    
    };

    http.get("/api/{topic}/{subtopic}", params)
    .success(function(response){
        // response will be automatically parsed if it's a JSON response
    })
    .error(function() {
        alert("Call failed");   
    });
</code></pre>

<p>This will send a HTTP get to "/api/sometopic/somesubtopic" and will then call either the success or error
callback. Text in the params is automatically interpolated using the same engine as text.js</p>

<p>and for a post:</p>

<pre><code>    var params = {
        topic: "sometopic",
        subtopic: "somesubtopic"    
    };

    http.post("/api/{topic}/{subtopic}", params)
    .send({
        data: "data",
        otherData: "otherData"  
    })
    .success(function(response){

        // response will be automatically parsed if it's a JSON response

    });

</code></pre>

<p>This will automatically send the supplied data encoded as JSON with the proper content-type headers to the
same endpoint as before.</p>

<p>For a more complex example:</p>

<pre><code>    var params = {
        topic: "sometopic",
        subtopic: "somesubtopic"    
    };

    http.post("/api/{topic}/{subtopic}", params)
    .withBasicAuth("username","password")
    .withQuery({
        extraData: "extra data" 
    })
    .send({
        data: "data",
        otherData: "otherData"  
    })
    .success(function(response){

        // response will be automatically parsed if it's a JSON response

    });
</code></pre>

<p>This will send a request to "/api/sometopic/somesubtopic/?extraData=extra&amp;20data" with an encoded HTTP basic auth
header with the supplied user name and password. To use a different type of auth, call .withAuth(type, credentials).
You can also add custom headers by calling .withHeader(name, value) one or more times.</p>

<h3>
<a id="enumerable" class="anchor" href="#enumerable" aria-hidden="true"><span class="octicon octicon-link"></span></a>enumerable</h3>

<p>Basically a javascript copy of c# linq.</p>

<p>Examples:</p>

<pre><code>    var elements = document.querySelectorAll("*");

    enumerable.of(elements)
        .where(function(e) { return e.tagName == "IMG" || e.style.backgroundImage &gt; ""; })
        .select(function(e) { return e.style.height; })
        .distinct()
        .toArray();
</code></pre>

<p>This would return a simple array of image-like elements's distinct heights. To find the size of the one:</p>

<pre><code>    enumerable.of(elements)
        .where(function(e) { return e.tagName == "IMG" || e.style.backgroundImage &gt; ""; })
        .max(function(e) { return e.style.height; });
</code></pre>

<p>And to iterate over a list:</p>

<pre><code>    enumerable.of(collection).each(function(item) { 
        // do stuff
    });
</code></pre>

<h3>
<a id="logmanager" class="anchor" href="#logmanager" aria-hidden="true"><span class="octicon octicon-link"></span></a>logManager</h3>

<p>provides an easy framework for logging messages in modules, using the text.js engine.</p>

<pre><code>    var log = logManager.getLogger("Logger Name");

    log.info("Something happend. Details: {0}", details);

    log.error("Something bad happend. Details: {0}", details);
</code></pre>

<p>You can call logManager.get() to get the full text of all logs for the page with detailed timestamps.</p>

<p>You can set the logger display level (default to INFO) with the following:</p>

<pre><code>    logManager.logLevel = logManager.levels.DEBUG

    // DEBUG, INFO, WARN, ERROR
</code></pre>

<h3>
<a id="guid" class="anchor" href="#guid" aria-hidden="true"><span class="octicon octicon-link"></span></a>guid</h3>

<p>Returns v4 guids. Not cryptographically secure, but plenty random for everyday use.</p>

<pre><code>    guid.create() // =&gt; 621398fa-5b37-4164-98ff-6c845aa6c61c

    guid.createMany(2) // =&gt; array of 2 guids 
</code></pre>

<h3>
<a id="promise" class="anchor" href="#promise" aria-hidden="true"><span class="octicon octicon-link"></span></a>promise</h3>

<p>simple promise library.</p>

<p>Sample:</p>

<pre><code>    var myPromise = promise.that(function(resolve, reject) {
        do.some.async.work
            .success(function(data) {
                resolve(data);
            })
            .error(function(err) {
                reject(err);
            });
    });

    myPromise.then(function(err, data) {
        if (err) {
            // handle error 
        }

        // use data
    });
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/edamtoft/tagger">Tagger</a> is maintained by <a href="https://github.com/edamtoft">edamtoft</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  <script src="/js/tagger.js" />
  </body>
</html>
