define(["system/logManager"],function(a){"use strict";function b(a,b){function e(d){if(c.debug("Rendering map."),f=new google.maps.Map(a,{center:d,zoom:b.zoom||16,scrollwheel:!1,zoomControl:!1,draggable:!1,navigationControl:!1,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}),g=new google.maps.Marker({map:f,position:d,animation:google.maps.Animation.DROP}),b.info){var e=new google.maps.InfoWindow({content:b.info});f.addListener("mouseover",function(){e.open(f,g)}),f.addListener("click",function(){e.open(f,g)})}}var f=null,g=null;this.start=function(){require(["async!https://maps.googleapis.com/maps/api/js?key="+b.key],function(){var a=b.address;if(d[a])return c.debug("Address geocode cache hit: '{0}'.",a),void e(d[a]);var f=new google.maps.Geocoder;c.debug("Geocoding address '{0}'",a),f.geocode({address:a},function(b,f){if(f!==google.maps.GeocoderStatus.OK)return void c.error("Geocoding failed with code {0}",f);var g=b[0].geometry.location;d[a]=g,c.debug("Got geocode result {0}.",g),e(g)})})}}var c=a.getLogger("Google Map Controller"),d={};return b});