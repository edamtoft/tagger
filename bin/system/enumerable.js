define([],function(){"use strict";function a(b,c){var d=this,e=[];if(Array.isArray(b))e=b.slice(0);else{if("undefined"==typeof b.length)throw new Error("Dataset is not enumerable");for(var f=0;f<b.length;f++)e.push(b[f])}this.toArray=function(){return e},this.not=function(){return new a(e,!0)},this["null"]=function(){return new a(e.filter(function(a){return c?"undefined"!=typeof a&&null!==a:null===a}),!1)},this.distinct=function(){for(var b=[],c=0;c<e.length;c++){var d=e[c];-1===b.indexOf(d)&&b.push(d)}return new a(b,!1)},this.where=function(b){return c&&b&&(b=function(a){return!b(a)}),new a(e.filter(b),!1)},this.select=function(b){return new a(e.map(b),!1)},this.sort=function(){return new a(e.sort(),!1)},this.orderBy=function(b){return new a(e.sort(function(a,c){return b(a)>b(c)}),!1)},this.skip=function(b){return new a(e.slice(b),!1)},this.take=function(b){return new a(e.slice(0,b),!1)},this.orderByDescending=function(b){return new a(e.sort(function(a,c){return b(a)<b(c)}),!1)},this.each=function(a){for(var b=0;b<e.length;b++){var c=a(e[b]);if(c===!0)return d}return d},this.forEach=this.each,this.firstOrDefault=function(a){if(!a)return e[0]||null;c&&a&&(a=function(b){return!a(b)},c=!1);for(var b=0;b<e.length;b++){var d=e[b];if(a(d))return e[b]}return null},this.sum=function(a){c&&a&&(a=function(b){return!a(b)},c=!1);for(var b=0,d=0;d<e.length;d++){var f;f=a?a(e[d]):e[d],b+=f}return b},this.average=function(a){return c&&a&&(a=function(b){return!a(b)},c=!1),d.sum(a)/e.length},this.count=function(a){return a?(c&&(a=function(b){return!a(b)},c=!1),e.filter(a).length):e.length},this.any=function(a){if(!a)return e.length>0;c&&(a=function(b){return!a(b)},c=!1);for(var b=0;b<e.length;b++)if(a(e[b]))return!0;return!1},this.all=function(a){return c&&a&&(a=function(b){return!a(b)},c=!1),e.filter(a).length===e.length},this.min=function(a){c&&a&&(a=function(b){return!a(b)},c=!1);for(var b=!1,d=Number.MAX_VALUE,f=0;f<e.length;f++){var g;g=a?a(e[f]):e[f],d>g&&(d=g,b=!0)}return b?d:null},this.max=function(a){c&&a&&(a=function(b){return!a(b)},c=!1);for(var b=!1,d=Number.MIN_VALUE,f=0;f<e.length;f++){var g;g=a?a(e[f]):e[f],g>d&&(d=g,b=!0)}return b?d:null}}return{of:function(b){if("object"==typeof b&&!Array.isArray(b)&&"undefined"==typeof b.length){if(b instanceof a)return b;var c=[];for(var d in b)c.push({key:d,value:b[d]});return new a(c,!1)}return new a(b,!1)},empty:new a([],!1)}});